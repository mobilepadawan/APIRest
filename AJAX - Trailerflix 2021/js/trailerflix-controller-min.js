function recuperoContenidoStreaming(){$("#contenido").html(""),$.ajax({url:URL_CONTENIDO,dataType:"json",success:function(o){contenidoJSON=o,muestroGeneros(),guardoEnLS(o)},error:function(){$("#contenido").html(errorJSON())}})}function armoVistaFull(o){$("#contenido").html("");for(const n of o)$("#contenido").append(buildCard(n))}function guardoEnLS(o){localStorage.contenidoJSON=JSON.stringify(o)}function verDetalle(o){0==contenidoJSON.length&&(contenidoJSON=JSON.parse(localStorage.contenidoJSON));let n=contenidoJSON.find((n=>n.id==o));null!=n?(localStorage.setItem("contenido",JSON.stringify(n)),location.href="detail.html"):M.toast({html:"Contenido temporalmente no disponible.",classes:"red darken-3 white-text"})}function buscarToggle(){$("#txtBuscar").val(""),$("#divBuscar").slideToggle(),$("#txtBuscar").focus()}function tituloCateroria(o){return`<div class="col s12 m12 l12">\n               <div class="center" width="100%">\n                   <h2 class="white-text vertical-spaces">${o}</h2>\n               </div>\n           </div>`}function buscarContenido(o){if(null!=localStorage.contenidoJSON){contenidoJSON=JSON.parse(localStorage.contenidoJSON);const n=contenidoJSON.filter((n=>n.busqueda.includes(o)));if(0==n.length)M.toast({html:"<p>No se encontr√≥ contenido asociado :(</p>",classes:"red darken3 white-text"});else{$("#contenido").html(""),leyendaResultados=`<p class="red-text darken3">Se encontraron ${n.length} coincidencias.</p>`,$("#contenido").append(leyendaResultados);for(const o of n)$("#contenido").append(buildCard(o));buscarToggle()}}}function agrupoPorGenero(o,n){$("#contenido").html("");for(const e of o){const o=n.filter((o=>o.gen.includes(e)));$("#contenido").append(tituloCateroria(e));for(const n of o)$("#contenido").append(buildCard(n))}}function muestroTodo(o){armoVistaFull(o)}function recuperoContenido(){recargoContenido()}function recargoContenido(){recuperoContenidoStreaming()}function muestroGeneros(){agrupoPorGenero(GEN,contenidoJSON)}setTimeout((()=>{recuperoContenidoStreaming(),$("#contenido").fadeIn("fast",(()=>$("#visualizacion").fadeIn(200,(()=>$("#cargando").fadeOut(100)))))}),50),$("#txtBuscar").on("keypress",(function(o){13===o.keyCode&&buscarContenido($("#txtBuscar").val())})),$("#btnTodos").click((()=>{muestroTodo(contenidoJSON)})),$("#btnCategorias").click((()=>muestroGeneros())),$("#btnRecargar").click((()=>{recargoContenido(),location.reload()}));